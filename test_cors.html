<!DOCTYPE html>
<html lang="zh-Hant">
<head>
  <meta charset="utf-8">
  <title>CORS 測試頁</title>
</head>
<body>
  <h1>Firebase CORS 測試</h1>
  <button id="btnSubmit">測試 /submit</button>
  <button id="btnTop10">測試 /top10</button>
  <pre id="output" style="background:#f1f5f9;padding:10px;border-radius:8px;max-width:800px;overflow:auto"></pre>

<script>
const API_BASE = "https://asia-east1-agri-plant-quiz.cloudfunctions.net/api";
const out = document.getElementById("output");

function log(msg){ out.textContent += msg + "\n"; }

document.getElementById("btnSubmit").onclick = async ()=>{
  out.textContent="";
  try{
    const res = await fetch(API_BASE + "/submit", {
      method:"POST",
      headers:{ "Content-Type":"application/json" },
      body: JSON.stringify({ name:"CORS Test", type:"A", score:77, version:"v-test" })
    });
    log("狀態碼: "+res.status);
    log("回應: "+JSON.stringify(await res.json(),null,2));
  }catch(e){
    log("❌ 發生錯誤: "+e);
  }
};

document.getElementById("btnTop10").onclick = async ()=>{
  out.textContent="";
  try{
    const res = await fetch(API_BASE + "/top10");
    log("狀態碼: "+res.status);
    log("回應: "+JSON.stringify(await res.json(),null,2));
  }catch(e){
    log("❌ 發生錯誤: "+e);
  }
};
</script>
</body>
</html>
